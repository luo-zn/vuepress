# 介绍

TR-069 是 CPE 广域网管理协议，用于CPE和自动配置服务(ACS)之间的通信。CPE广域网管理协议定义了一种机制，它包含了CPE的安全自动配置，还将其他CPE管理功能合并到一个公共框架中。

TR-069修定文档规定了可应用于任何TR-069 CPE的管理协议的一般要求。其他文档为特定类型的设备或服务指定了管理对象或数据模型。

## 功能成分

CPE广域网管理协议旨在支持各种功能来管理一组CPE，包括以下主要功能:

* 自动配置和动态服务扩展  
  &emsp;&emsp;CPE广域网管理协议允许ACS基于各种标准来提供一个CPE或CPE集。  
  &emsp;&emsp;这种供应机制允许在首次连接到宽带接入网时进行CPE供应，并能够在任何后续时间重新供应或重新配置。这包括对异步ACS发起的CPE重新配置的支持。  
  &emsp;&emsp;协议中包含的识别机制允许允许基于每个特定CPE的需求或基于CPE供应商、模型、软件版本或其他标准的CPE供应。  
  &emsp;&emsp;协议还提供了可选工具，用于管理需要控制额外安全级别的可选应用程序或服务的特定于CPE的组件，例如那些涉及支付的组件。控制这些应用程序和服务的机制是在A.4.1.10 (ChangeDUState RPC), A.4.2.3 (DUStateChangeComplete RPC)中定义的软件模块管理机制，并在附录II/TR-157 修正案3  中进行了描述。  
  &emsp;&emsp;供应机制允许直接的未来扩展，以允许供应尚未包含在该规范的这个版本中的服务和功能。  
* 软件/固件镜像管理  
  &emsp;&emsp;CPE广域网协议提供了管理CPE软件/固件镜像文件下载的工具。协议提供了版本识别、文件下载发起(ACS发起下载和可选的CPE发起下载)、文件下载成功或失败通知ACS的机制。
* 软件模块管理  
  &emsp;&emsp;CPE广域网管理协议使用ACS能够管理CPE上的模块化软件和执行环境。提供的功能包括安装、更新和卸载软件模块，以及向ACS通知每个操作的成功或失败。该协议还支持启动和停止CPE上的应用程序，启用和禁用执行环境，并列出设备上可用的软件模块。
* 状态和性能监控  
  &emsp;&emsp;CPE广域网管理协议为CPE提供支持，使ACS可以使用这些信息来监视CPE的状态和性能统计数据。它还定义了一组机制，允许CPE主动通知ACS其状态的更改。
* 诊断  
  &emsp;&emsp;CPE广域网管理协议为CPE提供支持，使其能够获得ACS可用于诊断和解决连接或服务问题的信息，并能够执行定义的诊断测试。

## 在端到端体系结构中的定位

ACS是驻留在网络中的服务器，用于管理用户场所中的设备。CPE广域网管理协议可以用来管理DSL B-NTs和其他类型的CPE，包括独立路由器和局域网侧客户端设备。它与服务提供者使用的特定访问媒体无关，尽管它依赖于设备已建立的IP层连接。  
[![端到端架构图](/imgs/network/tr-069/TR-069-end2end-architecture.png)](https://www.processon.com/view/6266432ae401fd0162e3d31d)

## 安全目标

CPE广域网管理协议旨在提供高度的安全性。安全模型也被设计为可伸缩的。它的目的是允许基本的安全性来适应不那么分健壮的CPE实现，同时为那些可以支持更高级安全机制的实现提供更好的安全性。一般来说，CPE广域网管理协议的安全目标如下:

* 防止CPE或ACS的管理功能被篡改，或CPE或ACS之间发生的事务被篡改。
* 为发生在CPE和ACS之间的事务提供机密性。
* 允许对每种事务类型进行适当的身份验证。
* 防止服务被盗。

## 结构性目标

协议旨在提供连接模型中的灵活性。本协议提供的结构性目标如下:

* 同时允许CPE和ACS发起连接，避免CPE和ACS之间需要建立持久连接。
* ACS和CPE之间的功能交互应该独立于发起连接建立的一端。特别是，即使不支持ACS发起的连接，所有ACS发起的事务也应该能够在CPE发起连接上发生。
* 允许一个或多个ACS服务于一个CPE种群，该种群可以与一个或多个服务提供者相关联。

本协议支持ACS和CPE的发现和关联:

* 为CPE提供机制，以便为给定的服务提供者发现适当的ACS。
* 提供机制以允许ACS安全地识别CPE并将其与用户/客户相关联。支持这种关联的过程应该支持结合用户交互以及全自动交互的模型。

该协议旨在允许ACS访问以控制和监视与CPE相关的各种参数。被提供用于访问这些参数的机制，在设计的时候有以下前提：

* 不同的CPE可能具有不同的功能级别，实现可选功能的不同子集。此外，ACS可以管理一系列不同的设备类型，提供一系列不同的服务。因此，ACS必须能够发现特定CPE的能力。
* ACS必须能够控制和监视CPE的当前配置。
* 除了ACS之外的其他控制实体可能能够控制CPE配置的某些参数(例如，通过LAN端的自动配置)。因此，协议必须允许ACS考虑对CPE配置的外部更改。ACS还应该能够控制哪些配置参数可以通过ACS以外的方式进行控制。
* 该协议应允许定义和访问特定供应商的参数。

该协议旨在最大限度地降低实现复杂性，同时在复杂性与功能之间提供权衡取舍的灵活性。该协议包含许多可选组件，只有在需要特定功能时才会发挥作用。该协议还在适当的地方合并了现有标准，允许利用现成的实现。

该协议旨在与底层接入网络无关。

该协议还被设计为可扩展的。它包括支持标准未来扩展的机制，以及供应商特定扩展的显式机制。

## 假设

下面列出了在定义CPE广域网管理协议时所做的一些假设：

* 所有CPE不论类型(网桥、路由器或其它)都获取IP地址以便与ACS通信。
* CWMP端点一次可以与一个ACS交互。在任何时候，CWMP端点都知道它可以连接的确切的一个ACS。(备注：就本文档而言，负载均衡器后面的ACS集合被视为单个ACS。)
