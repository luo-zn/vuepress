# [TCP keepalive](https://zh.wikipedia.org/wiki/Keepalive)

TCP是面向连接的，两端的应用程序能正常地进行收发数据时则可以判断对端程序正常存活。当长时间没有数据传输时，则需要一种机制来保证tcp的连接是一直存活的，它就是tcp keepalive。所以tcp协议的连接被分为长连接和短连接，短连接的情况下，数据传输完成后便会主动关闭连接，及时释放资源。  
长连接情况下，进行数据传输后，会有很长一段时间没有数据交互，在这段空闲的时间段内，两端的socket连接还是保持着并没有释放。此时客户端有可能会出现crash，断电、重启、死机，或是遇到中间路由网络故障等情况，而服务端的TCP连接并未正常释放，因为对端的意外故障无法正常地发出断开连接的通知，所以会继续维护当前socket连接。如果频繁出现这种情况的话会造成系统资源的消耗浪费。而TCP的keepalive探测机制能够做到检测对端连接是否正常存活。